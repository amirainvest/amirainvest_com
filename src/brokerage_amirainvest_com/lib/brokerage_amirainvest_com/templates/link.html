<html>
<head>
    <style>
        .alert-success {
            font-size: 1.2em;
            font-family: Arial, Helvetica, sans-serif;
            background-color: #008000;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 15px;
            width: 100%;
            height: 100%;
        }

        .hidden {
            visibility: hidden;
        }
    </style>
</head>
<body>

<div>
    <button id="link-initialize">Link To Plaid</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
<script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>
<script type="text/javascript">
    (function ($) {
        var handler = Plaid.create({
            token: '{{link_token}}',
            onSuccess: function (public_token, metadata) {
                // Send the public_token to your app server.
                // The metadata object contains info about the institution the
                // user selected and the account ID or IDs, if the
                // Select Account view is enabled.
                $.post('/link', {
                    public_token: public_token,
                });
                document.getElementById("alert").classList.remove("hidden");
            },
            onExit: function (err, metadata) {
                // The user exited the Link flow.
                if (err != null) {
                    // The user encountered a Plaid API error prior to exiting.
                }
                // metadata contains information about the institution
                // that the user selected and the most recent API request IDs.
                // Storing this information can be helpful for support.
                document.getElementById("alert").classList.remove("hidden");
            }
        });

        $('#link-initialize').click(() => {
            handler.open();
        })

    })(jQuery);
</script>
<div id="alert" class="alert-success hidden">
    <div>
        <h2>All done here!</h2>
        <p>You can close this window and go back to plaid-cli.</p>
    </div>
</div>
</body>
</html>
